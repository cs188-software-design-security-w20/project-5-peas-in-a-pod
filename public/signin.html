<!DOCTYPE html>
<html>
<!--
Five Peas Flight Search
signin.html

Copyright (c) 2020 Derek Chu, Kevin Hsieh, Leo Liu, Quentin Truong.
All Rights Reserved.
-->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- For development purposes on localhost:8080, use 773049605239-i20d5b73br9717fipmm8896s5cqpa4s0.apps.googleusercontent.com -->
  <meta name="google-signin-client_id" content="773049605239-66ll1k7igb4fre0n1ounatv5ruj7bvfi.apps.googleusercontent.com">
  <meta name="google-signin-cookiepolicy" content="single_host_origin">
  <meta name="google-signin-scope" content="profile email">
  <title>Sign in</title>
  <link rel="shortcut icon" href="favicon.ico">
  <link rel="stylesheet" href="materialize/materialize.css">
  <link rel="stylesheet" href="materialize/icon.css">
  <link rel="stylesheet" href="styles.css">
  <script src="materialize/materialize.js"></script>
  <script src="utilities.js"></script>
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <script>
  function onSignIn(googleUser) {
    var id_token = googleUser.getAuthResponse().id_token;
    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/api/sign-up');
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.onload = function(response) {
      console.log(response);
      window.location.replace("/");
    };
    xhr.send('idtoken=' + id_token);
  }
  </script>
</head>

<body>
  <header><nav>
    <div class="nav-wrapper container">
      <a href="/" class="brand-logo">
        <i class="material-icons">flight</i>Five Peas Flight Search
      </a>
    </div>
  </nav></header>

  <main class="container">
    <div class="row"><div class="col s12">
      <!-- <h5>Sign in</h5>
      <form action="/api/sign-in" method="POST">
        <div class="row" style="margin-bottom: 0"><div class="input-field col s12">
          <input type="text" name="email_address">
          <label>Email address</label>
        </div></div>
        <div class="row"><div class="input-field col s12">
          <input type="password" name="password">
          <label>Password</label>
        </div></div>
        <button class="btn waves-effect waves-light" type="submit">Sign in
          <i class="material-icons right">send</i>
        </button> 
      </form> -->
      <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
    </div></div>
  </main>

  <footer class="page-footer grey lighten-3 black-text"><div class="container">
    <a target="_blank" href="https://github.com/cs188-software-design-security-w20/project-5-peas-in-a-pod">
      Five Peas Flight Search
    </a>
    <span id="app-version"></span>
    <br>
    Copyright Â© 2020
    <a target="_blank" href="about:blank">Derek Chu</a>,
    <a target="_blank" href="https://www.kevinhsieh.net">Kevin Hsieh</a>,
    <a target="_blank" href="about:blank">Leo Liu</a>,
    <a target="_blank" href="https://www.quentintruong.com">Quentin Truong</a>.
    All Rights Reserved.
  </div></footer>
</body>
</html>
